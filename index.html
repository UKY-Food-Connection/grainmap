

<!DOCTYPE html>
<html>
<head>
    <title>Ky Grain Map</title>
    <link rel="stylesheet" href="css/basic.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>    


</head>
<body>

<h1>Grain User Locations</h1>

<div id="map"></div>

<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

<script>


    // Create empty layers
    var brewerLayer,
        distillerLayer,
        millerLayer,
        countyLayer,
        urban_areaLayer,
        surroundingLayer,
        Stamen_TonerLite,
        Esri_WorldImagery;

    //A couple of alt-basemaps
    var Stamen_TonerLite = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}', {
    attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    subdomains: 'abcd',
    ext: 'png'
    }),
        Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    });

    // Create Map Object that automatically shows the project data over our alt-basemaps
    var map = L.map('map',{
        center: [38.0253406,-84.4752004],
        zoom: 11,
        maxZoom: 17,
        minZoom: 9,
        layers: [Stamen_TonerLite]
    });

/*    //Get GeoJSON datasets
    $.getJSON("data/brewers.geojson", function(data) {
        brewerLayer = L.geoJson(data, {
            onEachFeature: function ( feature, layer ){
                projects.addLayer(layer), layer.bindPopup(feature.properties.LicenseeName+" "+feature.properties.City)},
            pointToLayer: function (feature, latlng) {
                return L.circleMarker (latlng, style(feature));
            }
        })
    });

    $.getJSON("data/distillers.geojson", function(data) {
        distillerLayer = L.geoJson(data, {
            onEachFeature: function ( feature, layer ){
                projects.addLayer(layer), layer.bindPopup(feature.properties.LicenseeName+" "+feature.properties.City)},
            pointToLayer: function (feature, latlng) {
                return L.circleMarker (latlng, style(feature));
            }
        })
    });

    $.getJSON("data/millers.geojson", function(data) {
        millerLayer = L.geoJson(data, {
            onEachFeature: function ( feature, layer ){
                projects.addLayer(layer), layer.bindPopup(feature.properties.LicenseeName+" "+feature.properties.City)},
            pointToLayer: function (feature, latlng) {
                return L.circleMarker (latlng, style(feature));
            }
        })
    });*/

    // Get GeoJSON map data
    $.getJSON("data/ky_counties.geojson", function(data) {
        countyLayer = L.geoJson(data, {
            onEachFeature: function ( feature, layer ){
                addLayer(layer)},
            fillOpacity: 1,
            weight: .25,
            opacity: 1,
            color: '#D3D3D3',
            dashArray: '3',
            fillColor: '#264653'
        })
    });

    $.getJSON("data/surrounding_states.geojson", function(data) {
        surroundingLayer = L.geoJson(data, {
            onEachFeature: function ( feature, layer ){
                addLayer(layer)},
            fillOpacity: 0,
            weight: .25,
            opacity: 1,
            color: '#D3D3D3'
        })
    });

    $.getJSON("data/urban_areas.geojson", function(data) {
        urban_areaLayer = L.geoJson(data, {
            onEachFeature: function ( feature, layer ){
                addLayer(layer)},
            fillOpacity: 1,
            weight: 0,
            opacity: 0,
            fillColor: '#BFDFEC'
        })
    });



/*    // Create Leaflet Control Object for Legend
    var legend = L.control({position: 'bottomright'});

    // Function that runs when legend is added to map
    legend.onAdd = function (map) {

        // Create Div Element and Populate it with HTML
        var div = L.DomUtil.create('div', 'legend');
        div.innerHTML += "<b>"+'Type of Grain User'+"</b>"+"<br>";

        types = ['brewerLayer', 'distillerLayer', 'millerLayer'];
        labels = ['Brewer','Distiller','Millers & Bakeries'];

        for (var i = 0; i < types.length; i++) {
            div.innerHTML +=
                '<i class="circle" style="background:' + setColor(types[i]) + '"></i> ' +
                (types[i] ? labels[i] + '<br>' : '+');
        }

        div.innerHTML += '<hr><i style="background: #ccff33"></i><p>Cleanup Projects</p>';

        return div;
    };*/

/*    // Add Legend to Map
    legend.addTo(map);*/

    // Create groupings for layer controller
/*    var datasets = {
        "Brewers": brewerLayer,
        "Distillers": distillerLayer,
        "Millers & Bakeries": millerLayer
    };

    var background = {
        "County Boundaries": countyLayer,
        "Urban Areas": urban_areaLayer
    };*/

    var baselayers = {
        "Street Map": Stamen_TonerLite,
        "Satellite Imagery": Esri_WorldImagery
    };

    var overlayData = {
        "Urban Areas": urban_areaLayer,
        "County Boundaries": countyLayer
    };

    // // Add layer controller to Map
    // L.control.layers(datasets, background, baselayers).addTo(map);
    L.control.layers(baselayers, overlayData).addTo(map);

    /*// Add Scale Bar to Map
    L.control.scale({position: 'bottomleft'}).addTo(map);*/
</script>
</body>
</html>